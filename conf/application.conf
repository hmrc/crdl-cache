# Copyright 2025 HM Revenue & Customs
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

include "backend.conf"

# This is the main configuration file for the application.
# ~~~~~

appName = crdl-cache

# Default http client
play.modules.enabled += "uk.gov.hmrc.play.bootstrap.HttpClientV2Module"

# Play Modules
play.modules.enabled += "uk.gov.hmrc.crdlcache.config.Module"
play.modules.enabled += "uk.gov.hmrc.mongo.play.PlayMongoModule"
play.modules.enabled += "uk.gov.hmrc.internalauth.client.modules.InternalAuthModule"

# The application languages
# ~~~~~
play.i18n.langs = ["en"]

# Router
# ~~~~~
# Define the Router object to use for this application.
# This router will be looked up first when the application is starting up,
# so make sure this is the entry point.
# Furthermore, it's assumed your route file is named properly.
# So for an application router like `my.application.Router`,
# you may need to define a router file `conf/my.application.routes`.
# Default to Routes in the root package (and conf/routes)
# !!!WARNING!!! DO NOT CHANGE THIS ROUTER
play.http.router = prod.Routes


# Controller
# ~~~~~
# By default all controllers will have authorisation, logging and
# auditing (transaction monitoring) enabled.
# The below controllers are the default exceptions to this rule.

controllers {
}

# Microservice specific config

play.assets {
  path = "/public"
  urlPrefix = ""
}

mongodb {
  uri = "mongodb://localhost:27017/crdl-cache"
}

last-updated-date {
  default = "2026-01-19"
}

import-codelists {
  schedule = "0 30 23 ? * Tue"

  codelists = [
    {
      code = "BC01"
      origin = "SEED"
      keyProperty = "EvidenceTypeCode"
    }
    {
      code = "BC03"
      origin = "SEED"
      keyProperty = "AcoActionNotPossibleReasonCode"
    }
    {
      code = "BC08"
      origin = "SEED"
      keyProperty = "CountryCode"
    }
    {
      code = "BC09"
      origin = "SEED"
      keyProperty = "RefusalReasonCode"
    }
    {
      code = "BC11"
      origin = "SEED"
      keyProperty = "NationalAdministrationCode"
    }
    {
      code = "BC12"
      origin = "SEED"
      keyProperty = "LanguageCode"
    }
    {
      code = "BC15"
      origin = "SEED"
      keyProperty = "EventTypeCode"
    }
    {
      code = "BC17"
      origin = "SEED"
      keyProperty = "KindOfPackages"
    }
    {
      code = "BC22"
      origin = "SEED"
      keyProperty = "AlertOrRejectionOfMovementReasonCode"
    }
    {
      code = "BC26"
      origin = "SEED"
      keyProperty = "ReasonForInterruptionCode"
    }
    {
      code = "BC34"
      origin = "SEED"
      keyProperty = "SubmittingPersonCode"
    }
    {
      code = "BC35"
      origin = "SEED"
      keyProperty = "TransportUnitCode"
    }
    {
      code = "BC36"
      origin = "SEED"
      keyProperty = "ExciseProductCode"
    }
    {
      code = "BC37"
      origin = "SEED"
      keyProperty = "CnCode"
    }
    {
      code = "BC40"
      origin = "SEED"
      keyProperty = "WineGrowingZoneCode"
    }
    {
      code = "BC41"
      origin = "SEED"
      keyProperty = "WineOperationCode"
    }
    {
      code = "BC43"
      origin = "SEED"
      keyProperty = "CancellationReasonCode"
    }
    {
      code = "BC46"
      origin = "SEED"
      keyProperty = "UnsatisfactoryReasonCode"
    }
    {
      code = "BC51"
      origin = "SEED"
      keyProperty = "DelayExplanationCode"
    }
    {
      code = "BC52"
      origin = "SEED"
      keyProperty = "UnitOfMeasureCode"
    }
    {
      code = "BC57"
      origin = "SEED"
      keyProperty = "AcoActionCode"
    }
    {
      code = "BC58"
      origin = "SEED"
      keyProperty = "DelayedResultReasonCode"
    }
    {
      code = "BC66"
      origin = "SEED"
      keyProperty = "ExciseProductsCategoryCode"
    }
    {
      code = "BC67"
      origin = "SEED"
      keyProperty = "TransportModeCode"
    }
    {
      code = "BC106"
      origin = "SEED"
      keyProperty = "DocumentType"
    }
    {
      code = "BC107"
      origin = "SEED"
      keyProperty = "ManualClosureRequestReasonCode"
    }
    {
      code = "BC108"
      origin = "SEED"
      keyProperty = "ManualClosureRejectionReasonCode"
    }
    {
      code = "BC109"
      origin = "SEED"
      keyProperty = "NationalAdministrationDegreePlatoCode"
    }
  ]
}

import-pd-lists {
  schedule = "0 00 06 ? * *"
  phase = "P6"
  domain = "NCTS"

  pd-lists = [
    {
      code = "CL008"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    {
      code = "CL009"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    {
      code = "CL010"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    # {
    #    code = "CL016"
    #    origin = "CSRD2"
    #    keyProperty = "CUSCode"
    #  }
    {
      code = "CL017"
      origin = "CSRD2"
      keyProperty = "KindOfPackages"
    }
    {
      code = "CL019"
      origin = "CSRD2"
      keyProperty = "Code"
    }
    {
      code = "CL030"
      origin = "CSRD2"
      keyProperty = "XmlErrorCodesCode"
    }
    {
      code = "CL038"
      origin = "CSRD2"
      keyProperty = "QualifierOfTheIdentification"
    }
    {
      code = "CL042"
      origin = "CSRD2"
      keyProperty = "Code"
    }
    {
      code = "CL048"
      origin = "CSRD2"
      keyProperty = "Currency"
    }
    {
      code = "CL056"
      origin = "CSRD2"
      keyProperty = "Role"
    }
    {
      code = "CL076"
      origin = "CSRD2"
      keyProperty = "GuaranteeTypeCode"
    }
    {
      code = "CL094"
      origin = "CSRD2"
      keyProperty = "RepresentativeStatusCode"
    }
    # {
    #   code = "CL101"
    #   origin = "CSRD2"
    #   keyProperty = "UnDangerousGoodsCode"
    #  }
    {
      code = "CL112"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    {
      code = "CL116"
      origin = "CSRD2"
      keyProperty = "TransportChargesMethodOfPayment"
    }
    {
      code = "CL147"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    # {
    #  code = "CL152"
    #  origin = "CSRD2"
    #  keyProperty = "Code"
    #  }
    {
      code = "CL165"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    {
      code = "CL167"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    {
      code = "CL178"
      origin = "CSRD2"
      keyProperty = "PreviousDocumentTypeCode"
    }
    {
      code = "CL180"
      origin = "CSRD2"
      keyProperty = "Code"
    }
    {
      code = "CL181"
      origin = "CSRD2"
      keyProperty = "KindOfPackages"
    }
    {
      code = "CL182"
      origin = "CSRD2"
      keyProperty = "KindOfPackages"
    }
    {
      code = "CL190"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    {
      code = "CL198"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    {
      code = "CL213"
      origin = "CSRD2"
      keyProperty = "SupportingDocumentCode"
    }
    {
      code = "CL214"
      origin = "CSRD2"
      keyProperty = "PreviousDocumentTypeCode"
    }
    {
      code = "CL215"
      origin = "CSRD2"
      keyProperty = "DocumentType"
    }
    {
      code = "CL217"
      origin = "CSRD2"
      keyProperty = "DeclarationTypeSecurityCode"
    }
    {
      code = "CL218"
      origin = "CSRD2"
      keyProperty = "TransportModeCode"
    }
    {
      code = "CL219"
      origin = "CSRD2"
      keyProperty = "TypeOfIdentificationofMeansOfTransportActiveCode"
    }
    {
      code = "CL226"
      origin = "CSRD2"
      keyProperty = "RejectionDepartureExportCode"
    }
    {
      code = "CL228"
      origin = "CSRD2"
      keyProperty = "PreviousDocumentTypeCode"
    }
    {
      code = "CL229"
      origin = "CSRD2"
      keyProperty = "GuaranteeTypeCode"
    }
    {
      code = "CL230"
      origin = "CSRD2"
      keyProperty = "GuaranteeTypeCode"
    }
    {
      code = "CL231"
      origin = "CSRD2"
      keyProperty = "DeclarationTypeCode"
    }
    {
      code = "CL232"
      origin = "CSRD2"
      keyProperty = "DeclarationTypeCode"
    }
    {
      code = "CL234"
      origin = "CSRD2"
      keyProperty = "PreviousDocumentTypeCode"
    }
    {
      code = "CL235"
      origin = "CSRD2"
      keyProperty = "AuthorisationType"
    }
    {
      code = "CL236"
      origin = "CSRD2"
      keyProperty = "AuthorisationType"
    }
    {
      code = "CL239"
      origin = "CSRD2"
      keyProperty = "AdditionalInformationCode"
    }
    # {
    #   code = "CL244"
    #   origin = "CSRD2"
    #   keyProperty = "UnLocodeExtendedCode"
    #  }
    {
      code = "CL248"
      origin = "CSRD2"
      keyProperty = "CountryCode"
    }
    {
      code = "CL251"
      origin = "CSRD2"
      keyProperty = "GuaranteeTypeCode"
    }
    {
      code = "CL252"
      origin = "CSRD2"
      keyProperty = "InvalidGuaranteeReasonCode"
    }
    {
      code = "CL286"
      origin = "CSRD2"
      keyProperty = "GuaranteeTypeCode"
    }
    {
      code = "CL296"
      origin = "CSRD2"
      keyProperty = "Code"
    }
    {
      code = "CL326"
      origin = "CSRD2"
      keyProperty = "QualifierOfTheIdentification"
    }
    {
      code = "CL347"
      origin = "CSRD2"
      keyProperty = "TypeOfLocation"
    }
    {
      code = "CL349"
      origin = "CSRD2"
      keyProperty = "Unit"
    }
    {
      code = "CL380"
      origin = "CSRD2"
      keyProperty = "DocumentType"
    }
    {
      code = "CL437"
      origin = "CSRD2"
      keyProperty = "Code"
    }
    {
      code = "CL505"
      origin = "CSRD2"
      keyProperty = "CountryCode"
     }
    {
      code = "CL560"
      origin = "CSRD2"
      keyProperty = "BusinessRejectionTypeDepExpCode"
    }
    {
      code = "CL580"
      origin = "CSRD2"
      keyProperty = "BusinessRejectionTypeTraCode"
    }
    {
      code = "CL581"
      origin = "CSRD2"
      keyProperty = "RejectionCodeTransitCode"
    }
    {
      code = "CL704"
      origin = "CSRD2"
      keyProperty = "Role"
    }
    {
      code = "CL716"
      origin = "CSRD2"
      keyProperty = "Code"
    }
    {
      code = "CL750"
      origin = "CSRD2"
      keyProperty = "TypeOfIdentification"
    }
    {
      code = "CL752"
      origin = "CSRD2"
      keyProperty = "Code"
    }
    {
      code = "CL754"
      origin = "CSRD2"
      keyProperty = "Type"
    }
  ]
}

  import-correspondence-lists {
  schedule = "0 30 23 ? * Tue"

  correspondence-lists = [
    {
      code = "E200"
      origin = "SEED"
      keyProperty = "CnCode"
      valueProperty = "ExciseProductCode"
    }
  ]
}

import-offices {
  schedule = "0 30 4 * * ?"
}

microservice {
  services {
    internal-auth {
      host = localhost
      port = 8470
    }

    dps-api {
      host = localhost
      port = 7253
      ref-data-path = "crdl-ref-data-dps-stub/iv_crdl_reference_data"
      customs-offices-path = "crdl-ref-data-dps-stub/iv_crdl_customs_office"
      clientId = "client_id_must_be_set_in_app-config-xxx"
      clientSecret = "client_secret_must_be_set_in_app-config-xxx"

      # # Use for local testing with the real HIP API:
      # protocol = "https"
      # host = "admin.qa.tax.service.gov.uk"
      # port = 443
      # ref-data-path = "hip/crdl/views/iv_crdl_reference_data"
      # customs-offices-path = "hip/crdl/views/iv_crdl_customs_office"
      # # The following environment variables must be set using credentials from Integration Hub:
      # clientId = ${CLIENT_ID}
      # clientSecret = ${CLIENT_SECRET}
    }
  }
}

